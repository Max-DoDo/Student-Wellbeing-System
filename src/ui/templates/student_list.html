{% extends "base.html" %}
{% block content %}
<h2>Student List</h2>
<style>
details {
   margin-bottom: 12px;
   border: 1px solid #ddd;
   border-radius: 6px;
   background: #fff;
   padding: 10px;
}
summary {
   cursor: pointer;
   font-size: 18px;
   font-weight: 600;
   padding: 8px;
   list-style: none;
}
summary::-webkit-details-marker {
   display: none;
}
.student-summary {
   display: flex;
   justify-content: space-between;
   align-items: center;
}
.more-info {
   padding: 12px 15px;
   border-top: 1px solid #eee;
   background: #f9f9f9;
   margin-top: 10px;
}
.expand-title {
   font-weight: bold;
   margin-bottom: 6px;
}
.info-row {
   margin-bottom: 4px;
}
</style>
{% for s in students %}
<details>
<summary>
<div class="student-summary">
<!-- Student ID + Name -->
<span>
               ID: {{ s.id }} â€”
               {{ s.first_name if s.first_name else s.fname }}
               {{ s.last_name if s.last_name else s.lname }}
</span>
<!-- Role-specific buttons -->
           {% if role == 'wellbeing' %}
<a href="{{ url_for('wellbeing_student_detail', sid=s.id) }}"
                  class="btn btn-sm btn-primary">View Analytics</a>
           {% elif role == 'course_leader' %}
<a href="{{ url_for('course_leader_student_detail', sid=s.id) }}"
                  class="btn btn-sm btn-primary">View Academic</a>
           {% endif %}
</div>
</summary>
<!-- Expanded Details -->
<div class="more-info">
<div class="expand-title">Student Information</div>
<div class="info-row">
<strong>Email:</strong>
           {{ s.email if s.email else "test_email@example.com" }}
</div>
<div class="info-row">
<strong>Personal Tutor:</strong>
           {{ s.personal_tutor_email if s.personal_tutor_email else "tutor@example.com" }}
</div>
<div class="info-row">
<strong>Emergency Contact:</strong>
           {{ s.emergency_contact_name if s.emergency_contact_name else "Not Provided" }}
</div>
<div class="info-row">
<strong>Emergency Phone:</strong>
           {{ s.emergency_contact_phone if s.emergency_contact_phone else "000-000-0000" }}
</div>
</div>
</details>
{% endfor %}
{% endblock %}